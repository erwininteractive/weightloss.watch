<nav class="sticky top-0 z-50 bg-white/60 backdrop-blur-md text-slate-700 border-b border-slate-200/50 shadow-sm" x-data="{ mobileMenuOpen: false }">
	<div class="px-4 sm:px-6 lg:px-8">
		<div class="flex justify-between items-center h-16">
			<!-- Logo -->
			<div class="shrink-0">
				<a href="/" class="flex items-center gap-2 hover:opacity-80 transition-opacity">
					<img class="h-8" src="/images/weightogether_logo.png" />
					<img class="h-8 hidden lg:block" src="/images/weightogether_banner.png" />
				</a>
			</div>

			<!-- Desktop Navigation -->
			<div class="hidden 2xl:flex 2xl:items-center 2xl:gap-6">
				<a href="/about" class="text-slate-600 hover:text-teal-600 transition-colors font-medium">About</a>
				<a href="/resources" class="text-slate-600 hover:text-teal-600 transition-colors font-medium">Resources</a>
				<a href="/donate" class="text-slate-600 hover:text-pink-600 transition-colors flex items-center gap-1 font-medium"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>Donate</a>
				<a href="/contribute" class="text-slate-600 hover:text-emerald-600 transition-colors flex items-center gap-1 font-medium"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>Contribute</a>
				<% if (typeof user !== 'undefined' && user) { %>
					<a href="/dashboard" class="text-slate-600 hover:text-teal-600 transition-colors font-medium">Dashboard</a>
					<a href="/teams" class="text-slate-600 hover:text-teal-600 transition-colors font-medium">Teams</a>
					<a href="/messages" class="text-slate-600 hover:text-teal-600 transition-colors flex items-center gap-1 font-medium relative">
						<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
						</svg>
						Messages
						<span id="messages-unread-badge" class="absolute -top-1 -right-2 inline-flex items-center justify-center w-4 h-4 text-xs font-bold text-white bg-red-500 rounded-full"></span>
					</a>
					<a href="/achievements" class="text-slate-600 hover:text-teal-600 transition-colors flex items-center gap-1 font-medium">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
							<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
						</svg>
						Achievements
					</a>
					<% if (user.isAdmin) { %>
						<a href="/admin/users" class="text-slate-600 hover:text-purple-600 transition-colors flex items-center gap-1 font-medium">
							<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
								<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
							</svg>
							Admin
						</a>
					<% } %>
				<% } %>
			</div>

			<!-- Desktop Right Section -->
			<div class="hidden 2xl:flex 2xl:items-center 2xl:gap-4">
				<% if (typeof user !== 'undefined' && user) { %>
					<!-- User Dropdown -->
					<div class="relative" x-data="{ open: false }">
						<button @click="open = !open" @click.away="open = false" class="flex items-center gap-2 text-slate-700 focus:outline-none hover:text-teal-600 transition-colors">
							<% if (user.avatarUrl) { %>
								<img src="<%= user.avatarUrl %>" alt="Avatar" class="w-8 h-8 rounded-full">
							<% } else { %>
								<div class="w-8 h-8 rounded-full bg-teal-500 flex items-center justify-center text-white text-sm font-bold">
									<%= (user.displayName || user.username).charAt(0).toUpperCase() %>
								</div>
							<% } %>
							<span class="hidden lg:inline font-medium"><%= user.displayName || user.username %></span>
							<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
						</button>
						<div x-show="open" x-transition class="absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-50 text-gray-800 border border-gray-200">
							<a href="/profile/edit" class="block px-4 py-2 text-sm hover:bg-gray-100">Edit Profile</a>
							<a href="/progress" class="block px-4 py-2 text-sm hover:bg-gray-100">Weight Progress</a>
							<a href="/settings" class="block px-4 py-2 text-sm hover:bg-gray-100">Settings</a>
							<a href="/feedback" class="block px-4 py-2 text-sm hover:bg-gray-100">Feedback</a>
							<div class="border-t border-gray-100 my-1"></div>
							<a href="/logout" class="block px-4 py-2 text-sm hover:bg-gray-100">Logout</a>
						</div>
					</div>
				<% } else { %>
					<a href="/login" class="text-slate-600 hover:text-teal-600 transition-colors font-medium">Login</a>
					<a href="/register" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded-lg font-medium transition-colors">Register</a>
				<% } %>
			</div>

			<!-- Mobile Menu Button -->
			<div class="flex items-center gap-2 2xl:hidden">
				<!-- Hamburger Menu Button -->
				<button @click="mobileMenuOpen = !mobileMenuOpen" class="p-2 rounded-lg text-slate-700 hover:bg-slate-100 hover:text-teal-600 transition-colors" aria-label="Toggle menu">
					<!-- Hamburger Icon -->
					<svg x-show="!mobileMenuOpen" class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
					</svg>
					<!-- Close Icon -->
					<svg x-show="mobileMenuOpen" x-cloak class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
					</svg>
				</button>
			</div>
		</div>
	</div>

	<!-- Mobile Menu -->
	<div x-show="mobileMenuOpen" x-cloak x-transition:enter="transition ease-out duration-200" x-transition:enter-start="opacity-0 -translate-y-1" x-transition:enter-end="opacity-100 translate-y-0" x-transition:leave="transition ease-in duration-150" x-transition:leave-start="opacity-100 translate-y-0" x-transition:leave-end="opacity-0 -translate-y-1" class="2xl:hidden border-t border-slate-200 bg-slate-50/60">
		<div class="px-4 py-3 space-y-1">
			<!-- Navigation Links -->
			<a href="/about" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">About</a>
			<a href="/resources" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Resources</a>
			<a href="/donate" class="px-3 py-2 rounded-lg text-slate-700 hover:bg-pink-50 hover:text-pink-600 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"></path></svg>Donate</a>
			<a href="/contribute" class="px-3 py-2 rounded-lg text-slate-700 hover:bg-emerald-50 hover:text-emerald-600 transition-colors flex items-center gap-2"><svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>Contribute</a>
			<% if (typeof user !== 'undefined' && user) { %>
				<a href="/dashboard" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Dashboard</a>
				<a href="/teams" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Teams</a>
				<a href="/messages" class="px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors flex items-center gap-2 relative">
					<svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
					</svg>
					Messages
					<span id="messages-unread-badge-mobile" class="inline-flex items-center justify-center w-5 h-5 text-xs font-bold text-white bg-red-500 rounded-full ml-auto"></span>
				</a>
				<a href="/achievements" class="px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors flex items-center gap-2">
					<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
						<path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path>
					</svg>
					Achievements
				</a>
				<% if (user.isAdmin) { %>
					<a href="/admin/users" class="px-3 py-2 rounded-lg text-slate-700 hover:bg-purple-50 hover:text-purple-600 transition-colors flex items-center gap-2">
						<svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
							<path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
						</svg>
						Admin
					</a>
				<% } %>

				<!-- User Section -->
				<div class="border-t border-slate-300 my-2 pt-2">
					<div class="flex items-center gap-3 px-3 py-2">
						<% if (user.avatarUrl) { %>
							<img src="<%= user.avatarUrl %>" alt="Avatar" class="w-10 h-10 rounded-full">
						<% } else { %>
							<div class="w-10 h-10 rounded-full bg-teal-500 flex items-center justify-center text-white text-sm font-bold">
								<%= (user.displayName || user.username).charAt(0).toUpperCase() %>
							</div>
						<% } %>
						<div>
							<div class="font-medium text-slate-800"><%= user.displayName || user.username %></div>
							<div class="text-sm text-slate-500"><%= user.email %></div>
						</div>
					</div>
					<a href="/profile/edit" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Edit Profile</a>
					<a href="/progress" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Weight Progress</a>
					<a href="/settings" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Settings</a>
					<a href="/feedback" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Feedback</a>
					<a href="/logout" class="block px-3 py-2 rounded-lg text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors">Logout</a>
				</div>
			<% } else { %>
				<!-- Auth Links -->
				<div class="border-t border-slate-300 my-2 pt-2 space-y-2">
					<a href="/login" class="block px-3 py-2 rounded-lg text-slate-700 hover:bg-teal-50 hover:text-teal-600 transition-colors">Login</a>
					<a href="/register" class="block px-3 py-2 rounded-lg bg-teal-600 hover:bg-teal-700 text-white text-center font-medium transition-colors">Register</a>
				</div>
			<% } %>
		</div>
	</div>
</nav>
